{"version":3,"file":"monitor.js","sources":["../src/utils/xhr.js","../src/utils/utils.js","../src/utils/cache.js","../src/utils/generateUniqueID.js","../src/config.js","../src/utils/report.js","../src/error/index.js","../src/performance/utils.js","../src/performance/observeEntries.js","../src/performance/observePaint.js","../src/performance/observeLCP.js","../src/performance/observeCLS.js","../src/performance/observeFID.js","../src/performance/observerLoad.js","../src/performance/observeFirstScreenPaint.js","../src/performance/xhr.js","../src/performance/fetch.js","../src/performance/fps.js","../src/performance/onVueRouter.js","../src/performance/index.js","../src/behavior/utils.js","../src/behavior/pv.js","../src/behavior/pageAccessDuration.js","../src/behavior/pageAccessHeight.js","../src/behavior/onClick.js","../src/behavior/onVueRouter.js","../src/behavior/pageChange.js","../src/behavior/index.js","../src/index.js"],"sourcesContent":["export const originalProto = XMLHttpRequest.prototype\nexport const originalOpen = originalProto.open\nexport const originalSend = originalProto.send","export function deepCopy(target) {\n    if (typeof target === 'object') {\n        const result = Array.isArray(target) ? [] : {}\n        for (const key in target) {\n            if (typeof target[key] == 'object') {\n                result[key] = deepCopy(target[key])\n            } else {\n                result[key] = target[key]\n            }\n        }\n\n        return result\n    }\n\n    return target\n}\n\nexport function onBFCacheRestore(callback) {\n    window.addEventListener('pageshow', event => {\n        if (event.persisted) {\n            callback(event)\n        }\n    }, true)\n}\n\nexport function onBeforeunload(callback) {\n    window.addEventListener('beforeunload', callback, true)\n}\n\nexport function onHidden(callback, once) {\n    const onHiddenOrPageHide = (event) => {\n        if (event.type === 'pagehide' || document.visibilityState === 'hidden') {\n            callback(event)\n            if (once) {\n                window.removeEventListener('visibilitychange', onHiddenOrPageHide, true)\n                window.removeEventListener('pagehide', onHiddenOrPageHide, true)\n            }\n        }\n    }\n\n    window.addEventListener('visibilitychange', onHiddenOrPageHide, true)\n    window.addEventListener('pagehide', onHiddenOrPageHide, true)\n}\n\nexport function executeAfterLoad(callback) {\n    if (document.readyState === 'complete') {\n        callback()\n    } else {\n        const onLoad = () => {\n            callback()\n            window.removeEventListener('load', onLoad, true)\n        }\n\n        window.addEventListener('load', onLoad, true)\n    }\n}\n\nexport function getPageURL() {\n    return window.location.href \n}","import { deepCopy } from './utils'\n\nconst cache = []\n\nexport function getCache() {\n    return deepCopy(cache)\n}\n\nexport function addCache(data) {\n    cache.push(data)\n}\n\nexport function clearCache() {\n    cache.length = 0\n}\n","export default function generateUniqueID() {\n    return `v2-${Date.now()}-${Math.floor(Math.random() * (9e12 - 1)) + 1e12}`\n}","const config = {\n    url: '',\n    appID: '',\n    userID: '',\n    vue: {\n        Vue: null,\n        router: null,\n    },\n}\n\nexport default config\n\nexport function setConfig(options) {\n    for (const key in config) {\n        if (options[key]) {\n            config[key] = options[key]\n        }\n    }\n}","import { originalOpen, originalSend } from './xhr'\nimport { addCache, getCache, clearCache } from './cache'\nimport generateUniqueID from '../utils/generateUniqueID'\nimport config from '../config'\n\nexport function isSupportSendBeacon() {\n    return !!window.navigator?.sendBeacon\n}\n\nconst sendBeacon = isSupportSendBeacon() ? window.navigator.sendBeacon.bind(window.navigator) : reportWithXHR\n\nconst sessionID = generateUniqueID()\nexport function report(data, isImmediate = false) {\n    if (!config.url) {\n        console.error('请设置上传 url 地址')\n    }\n\n    const reportData = JSON.stringify({\n        id: sessionID,\n        appID: config.appID,\n        userID: config.userID,\n        data,\n    })\n    \n    if (isImmediate) {\n        sendBeacon(config.url, reportData)\n        return\n    }\n\n    if (window.requestIdleCallback) {\n        window.requestIdleCallback(() => {\n            sendBeacon(config.url, reportData)\n        }, { timeout: 3000 })\n    } else {\n        setTimeout(() => {\n            sendBeacon(config.url, reportData)\n        })\n    }\n}\n\nlet timer = null\nexport function lazyReportCache(data, timeout = 3000) {\n    addCache(data)\n\n    clearTimeout(timer)\n    timer = setTimeout(() => {\n        const data = getCache()\n        if (data.length) {\n            report(data)\n            clearCache()\n        }\n    }, timeout)\n}\n\nexport function reportWithXHR(data) {\n    const xhr = new XMLHttpRequest()\n    originalOpen.call(xhr, 'post', config.url)\n    originalSend.call(xhr, JSON.stringify(data))\n}","import { lazyReportCache } from '../utils/report'\nimport { onBFCacheRestore, getPageURL } from '../utils/utils'\nimport config from '../config'\n\nexport default function error() {\n    const oldConsoleError = window.console.error \n    window.console.error = (...args) => { \n        oldConsoleError.apply(this, args)\n        lazyReportCache({\n            type: 'error',\n            subType: 'console-error',\n            startTime: performance.now(),\n            errData: args,\n            pageURL: getPageURL(),\n        })\n    }\n\n    // 捕获资源加载失败错误 js css img...\n    window.addEventListener('error', e => {\n        const target = e.target\n        if (!target) return\n\n        if (target.src || target.href) {\n            const url = target.src || target.href\n            lazyReportCache({\n                url,\n                type: 'error',\n                subType: 'resource',\n                startTime: e.timeStamp,\n                html: target.outerHTML,\n                resourceType: target.tagName,\n                paths: e.path.map(item => item.tagName).filter(Boolean),\n                pageURL: getPageURL(),\n            })\n        }\n    }, true)\n\n    // 监听 js 错误\n    window.onerror = (msg, url, line, column, error) => {\n        lazyReportCache({\n            msg,\n            line,\n            column,\n            error: error.stack,\n            subType: 'js',\n            pageURL: url,\n            type: 'error',\n            startTime: performance.now(),\n        })\n    }\n\n    // 监听 promise 错误 缺点是获取不到列数据\n    window.addEventListener('unhandledrejection', e => {\n        lazyReportCache({\n            reason: e.reason?.stack,\n            subType: 'promise',\n            type: 'error',\n            startTime: e.timeStamp,\n            pageURL: getPageURL(),\n        })\n    })\n\n    if (config.vue?.Vue) {\n        config.vue.Vue.config.errorHandler = (err, vm, info) => {\n            console.error(err)\n\n            lazyReportCache({\n                info,\n                error: err.stack,\n                subType: 'vue',\n                type: 'error',\n                startTime: performance.now(),\n                pageURL: getPageURL(),\n            })\n        }\n    }\n\n    onBFCacheRestore(() => {\n        error()\n    })\n}","export function isSupportPerformanceObserver() {\n    return !!window.PerformanceObserver\n}","import { isSupportPerformanceObserver } from './utils'\nimport { executeAfterLoad } from '../utils/utils'\nimport { lazyReportCache } from '../utils/report'\n\nexport default function observeEntries() {\n    executeAfterLoad(() => {\n        observeEvent('resource')\n        observeEvent('navigation')\n    })\n}\n\nlet hasAlreadyCollected = false\nexport function observeEvent(entryType) {\n    function entryHandler(list) {\n        const data = list.getEntries ? list.getEntries() : list\n        for (const entry of data) {\n            if (entryType === 'navigation') {\n                if (hasAlreadyCollected) return\n\n                if (observer) {\n                    observer.disconnect()\n                }\n\n                hasAlreadyCollected = true\n            }\n            // nextHopProtocol 属性为空，说明资源解析错误或者跨域\n            // beacon 用于上报数据，所以不统计。xhr fetch 单独统计\n            if ((!entry.nextHopProtocol && entryType !== 'navigation') || filter(entry.initiatorType)) {\n                return\n            }\n\n            lazyReportCache({\n                name: entry.name, // 资源名称\n                subType: entryType,\n                type: 'performance',\n                sourceType: entry.initiatorType, // 资源类型\n                duration: entry.duration, // 资源加载耗时\n                dns: entry.domainLookupEnd - entry.domainLookupStart, // DNS 耗时\n                tcp: entry.connectEnd - entry.connectStart, // 建立 tcp 连接耗时\n                redirect: entry.redirectEnd - entry.redirectStart, // 重定向耗时\n                ttfb: entry.responseStart, // 首字节时间\n                protocol: entry.nextHopProtocol, // 请求协议\n                responseBodySize: entry.encodedBodySize, // 响应内容大小\n                responseHeaderSize: entry.transferSize - entry.encodedBodySize, // 响应头部大小\n                resourceSize: entry.decodedBodySize, // 资源解压后的大小\n                isCache: isCache(entry), // 是否命中缓存\n                startTime: performance.now(),\n            })\n        }\n    }\n\n    let observer\n    if (isSupportPerformanceObserver()) {\n        observer = new PerformanceObserver(entryHandler)\n        observer.observe({ type: entryType, buffered: true })\n    } else {\n        const data = window.performance.getEntriesByType(entryType)\n        entryHandler(data)\n    }\n}\n\n// 不统计以下类型的资源\nconst preventType = ['fetch', 'xmlhttprequest', 'beacon']\nconst isSafari = /Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent)\nif (isSafari) {\n    // safari 会把接口请求当成 other\n    preventType.push('other')\n}\n\nfunction filter(type) {\n    return preventType.includes(type)\n}\n\nfunction isCache(entry) {\n    // 直接从缓存读取或 304\n    return entry.transferSize === 0 || (entry.transferSize !== 0 && entry.encodedBodySize === 0)\n}","import { isSupportPerformanceObserver } from './utils'\nimport { onBFCacheRestore, getPageURL } from '../utils/utils'\nimport { lazyReportCache } from '../utils/report'\n\nexport default function observePaint() {\n    if (!isSupportPerformanceObserver()) return\n    \n    const entryHandler = (list) => {        \n        for (const entry of list.getEntries()) {\n            if (entry.name === 'first-contentful-paint') {\n                observer.disconnect()\n            }\n    \n            const json = entry.toJSON()\n            delete json.duration\n    \n            const reportData = {\n                ...json,\n                subType: entry.name,\n                type: 'performance',\n                pageURL: getPageURL(),\n            }\n\n            lazyReportCache(reportData)\n        }\n    }\n    \n    const observer = new PerformanceObserver(entryHandler)\n    observer.observe({ type: 'paint', buffered: true })\n\n    onBFCacheRestore(event => {\n        requestAnimationFrame(() => {\n            ['first-paint', 'first-contentful-paint'].forEach(type => {\n                lazyReportCache({\n                    startTime: performance.now() - event.timeStamp,\n                    name: type,\n                    subType: type,\n                    type: 'performance',\n                    pageURL: getPageURL(),\n                    bfc: true,\n                })\n            })\n        })\n    })\n}","import { isSupportPerformanceObserver } from './utils'\nimport { onBFCacheRestore, getPageURL } from '../utils/utils'\nimport { lazyReportCache } from '../utils/report'\n\nlet lcpDone = false\nexport function isLCPDone() {\n    return lcpDone\n}\n\nexport default function observeLCP() {\n    if (!isSupportPerformanceObserver()) {\n        lcpDone = true\n        return\n    }\n    \n    const entryHandler = (list) => {\n        lcpDone = true\n\n        if (observer) {\n            observer.disconnect()\n        }\n        \n        for (const entry of list.getEntries()) {\n            const json = entry.toJSON()\n            delete json.duration\n\n            const reportData = {\n                ...json,\n                target: entry.element?.tagName,\n                name: entry.entryType,\n                subType: entry.entryType,\n                type: 'performance',\n                pageURL: getPageURL(),\n            }\n            \n            lazyReportCache(reportData)\n        }\n    }\n\n    const observer = new PerformanceObserver(entryHandler)\n    observer.observe({ type: 'largest-contentful-paint', buffered: true })\n\n    onBFCacheRestore(event => {\n        requestAnimationFrame(() => {\n            lazyReportCache({\n                startTime: performance.now() - event.timeStamp,\n                name: 'largest-contentful-paint',\n                subType: 'largest-contentful-paint',\n                type: 'performance',\n                pageURL: getPageURL(),\n                bfc: true,\n            })\n        })\n    })\n}","import { isSupportPerformanceObserver } from './utils'\nimport { onBFCacheRestore, deepCopy, getPageURL } from '../utils/utils'\nimport { lazyReportCache } from '../utils/report'\n\nexport default function observeCLS() {\n    if (!isSupportPerformanceObserver()) return\n\n    onBFCacheRestore(() => {\n        observeCLS()\n    })\n\n    let sessionValue = 0\n    let sessionEntries = []\n    const cls = {\n        subType: 'layout-shift',\n        name: 'layout-shift',\n        type: 'performance',\n        pageURL: getPageURL(),\n        value: 0,\n    }\n\n    const entryHandler = (list) => {\n        for (const entry of list.getEntries()) {\n            // Only count layout shifts without recent user input.\n            if (!entry.hadRecentInput) {\n                const firstSessionEntry = sessionEntries[0]\n                const lastSessionEntry = sessionEntries[sessionEntries.length - 1]\n            \n                // If the entry occurred less than 1 second after the previous entry and\n                // less than 5 seconds after the first entry in the session, include the\n                // entry in the current session. Otherwise, start a new session.\n                if (\n                    sessionValue\n                    && entry.startTime - lastSessionEntry.startTime < 1000\n                    && entry.startTime - firstSessionEntry.startTime < 5000\n                ) {\n                    sessionValue += entry.value\n                    sessionEntries.push(formatCLSEntry(entry))\n                } else {\n                    sessionValue = entry.value\n                    sessionEntries = [formatCLSEntry(entry)]\n                }\n            \n                // If the current session value is larger than the current CLS value,\n                // update CLS and the entries contributing to it.\n                if (sessionValue > cls.value) {\n                    cls.value = sessionValue\n                    cls.entries = sessionEntries\n                    cls.startTime = performance.now()\n                    lazyReportCache(deepCopy(cls))\n                }\n            }\n        }\n    }\n\n    const observer = new PerformanceObserver(entryHandler)\n    observer.observe({ type: 'layout-shift', buffered: true })\n}\n\nfunction formatCLSEntry(entry) {\n    const result = entry.toJSON()\n    delete result.duration\n    delete result.sources\n    \n    return result\n}","import { isSupportPerformanceObserver } from './utils'\nimport { onBFCacheRestore, getPageURL } from '../utils/utils'\nimport { lazyReportCache } from '../utils/report'\n\nexport default function observeFID() {\n    onBFCacheRestore(() => {\n        observeFID()\n    })\n    \n    if (!isSupportPerformanceObserver()) {\n        const entryHandler = (list) => {\n            if (observer) {\n                observer.disconnect()\n            }\n            \n            for (const entry of list.getEntries()) {\n                const json = entry.toJSON()\n                json.nodeName = entry.tagName\n                json.event = json.name\n                json.name = json.entryType\n                json.type = 'performance'\n                json.pageURL = getPageURL()\n                delete json.cancelable\n\n                lazyReportCache(json)\n            }\n        }\n    \n        const observer = new PerformanceObserver(entryHandler)\n        observer.observe({ type: 'first-input', buffered: true })\n        return\n    }\n\n    fidPolyfill()\n}\n\nfunction fidPolyfill() {\n    eachEventType(window.addEventListener)\n}\n\nfunction onInput(event) {\n    // Only count cancelable events, which should trigger behavior\n    // important to the user.\n    if (event.cancelable) {\n        // In some browsers `event.timeStamp` returns a `DOMTimeStamp` value\n        // (epoch time) instead of the newer `DOMHighResTimeStamp`\n        // (document-origin time). To check for that we assume any timestamp\n        // greater than 1 trillion is a `DOMTimeStamp`, and compare it using\n        // the `Date` object rather than `performance.now()`.\n        // - https://github.com/GoogleChromeLabs/first-input-delay/issues/4\n        const isEpochTime = event.timeStamp > 1e12\n        const now = isEpochTime ? Date.now() : performance.now()\n  \n        // Input delay is the delta between when the system received the event\n        // (e.g. event.timeStamp) and when it could run the callback (e.g. `now`).\n        const duration = now - event.timeStamp\n\n        lazyReportCache({\n            duration,\n            subType: 'first-input',\n            event: event.type,\n            name: 'first-input',\n            target: event.target.tagName,\n            startTime: event.timeStamp,\n            type: 'performance',\n            pageURL: getPageURL(),\n        })\n\n        eachEventType(window.removeEventListener)\n    }\n}\n\nfunction eachEventType(callback) {\n    const eventTypes = [\n        'mousedown',\n        'keydown',\n        'touchstart',\n    ]\n    \n    eventTypes.forEach((type) => callback(type, onInput, { passive: true, capture: true }))\n}","import { lazyReportCache } from '../utils/report'\nimport { onBFCacheRestore, getPageURL } from '../utils/utils'\n\nexport default function observerLoad() {\n    ['load', 'DOMContentLoaded'].forEach(type => onEvent(type))\n\n    onBFCacheRestore(event => {\n        requestAnimationFrame(() => {\n            ['load', 'DOMContentLoaded'].forEach(type => {\n                lazyReportCache({\n                    startTime: performance.now() - event.timeStamp,\n                    subType: type.toLocaleLowerCase(),\n                    type: 'performance',\n                    pageURL: getPageURL(),\n                    bfc: true,\n                })\n            })\n        })\n    })\n}\n\nfunction onEvent(type) {\n    function callback() {\n        lazyReportCache({\n            type: 'performance',\n            subType: type.toLocaleLowerCase(),\n            startTime: performance.now(),\n        })\n\n        window.removeEventListener(type, callback, true)\n    }\n\n    window.addEventListener(type, callback, true)\n}","import { executeAfterLoad, onBFCacheRestore, getPageURL } from '../utils/utils'\nimport { isLCPDone } from './observeLCP'\nimport { lazyReportCache } from '../utils/report'\n\nlet isOnLoaded = false\nexecuteAfterLoad(() => {\n    isOnLoaded = true\n})\n\nlet timer\nlet observer\nfunction checkDOMChange() {\n    clearTimeout(timer)\n    timer = setTimeout(() => {\n        // 等 load、lcp 事件触发后并且 DOM 树不再变化时，计算首屏渲染时间\n        if (isOnLoaded && isLCPDone()) {\n            observer && observer.disconnect()\n            lazyReportCache({\n                type: 'performance',\n                subType: 'first-screen-paint',\n                startTime: getRenderTime(),\n                pageURL: getPageURL(),\n            })\n\n            entries = null\n        } else {\n            checkDOMChange()\n        }\n    }, 500)\n}\n\nlet entries = []\nexport default function observeFirstScreenPaint() {\n    if (!MutationObserver) return\n\n    const next = window.requestAnimationFrame ? requestAnimationFrame : setTimeout\n    const ignoreDOMList = ['STYLE', 'SCRIPT', 'LINK']\n\n    observer = new MutationObserver(mutationList => {\n        checkDOMChange()\n        const entry = {\n            children: [],\n        }\n\n        for (const mutation of mutationList) {\n            if (mutation.addedNodes.length && isInScreen(mutation.target)) {\n                for (const node of mutation.addedNodes) {\n                    if (node.nodeType === 1 && !ignoreDOMList.includes(node.tagName) && isInScreen(node)) {\n                        entry.children.push(node)\n                    }\n                }\n            }\n        }\n\n        if (entry.children.length) {\n            entries.push(entry)\n            next(() => {\n                entry.startTime = performance.now()\n            })\n        }\n    })\n\n    observer.observe(document, {\n        childList: true,\n        subtree: true,\n    })\n\n    onBFCacheRestore(event => {\n        requestAnimationFrame(() => {\n            lazyReportCache({\n                startTime: performance.now() - event.timeStamp,\n                type: 'performance',\n                subType: 'first-screen-paint',\n                bfc: true,\n                pageURL: getPageURL(),\n            })\n        })\n    })\n}\n\nfunction getRenderTime() {\n    let startTime = 0\n    entries.forEach(entry => {\n        if (entry.startTime > startTime) {\n            startTime = entry.startTime\n        }\n    })\n\n    // 需要和当前页面所有加载图片的时间做对比，取最大值\n    // 图片请求时间要小于 startTime，响应结束时间要大于 startTime\n    performance.getEntriesByType('resource').forEach(item => {\n        if (\n            item.initiatorType === 'img'\n            && item.fetchStart < startTime \n            && item.responseEnd > startTime\n        ) {\n            startTime = item.responseEnd\n        }\n    })\n    \n    return startTime\n}\n\nconst viewportWidth = window.innerWidth\nconst viewportHeight = window.innerHeight\n\n// dom 对象是否在屏幕内\nfunction isInScreen(dom) {\n    const rectInfo = dom.getBoundingClientRect()\n    if (rectInfo.left < viewportWidth && rectInfo.top < viewportHeight) {\n        return true\n    }\n\n    return false\n}","import { originalOpen, originalSend, originalProto } from '../utils/xhr'\nimport { lazyReportCache } from '../utils/report'\n\nfunction overwriteOpenAndSend() {\n    originalProto.open = function newOpen(...args) {\n        this.url = args[1]\n        this.method = args[0]\n        originalOpen.apply(this, args)\n    }\n\n    originalProto.send = function newSend(...args) {\n        this.startTime = Date.now()\n\n        const onLoadend = () => {\n            this.endTime = Date.now()\n            this.duration = this.endTime - this.startTime\n\n            const { status, duration, startTime, endTime, url, method } = this\n            const reportData = {\n                status,\n                duration,\n                startTime,\n                endTime,\n                url,\n                method: (method || 'GET').toUpperCase(),\n                success: status >= 200 && status < 300,\n                subType: 'xhr',\n                type: 'performance',\n            }\n\n            lazyReportCache(reportData)\n            \n            this.removeEventListener('loadend', onLoadend, true)\n        }\n\n        this.addEventListener('loadend', onLoadend, true)\n        originalSend.apply(this, args)\n    }\n}\n\nexport default function xhr() {\n    overwriteOpenAndSend()\n}","import { lazyReportCache } from '../utils/report'\n\nconst originalFetch = window.fetch\n\nfunction overwriteFetch() {\n    window.fetch = function newFetch(url, config) {\n        const startTime = Date.now()\n        const reportData = {\n            startTime,\n            url,\n            method: (config?.method || 'GET').toUpperCase(),\n            subType: 'fetch',\n            type: 'performance',\n        }\n\n        return originalFetch(url, config)\n        .then(res => {\n            reportData.endTime = Date.now()\n            reportData.duration = reportData.endTime - reportData.startTime\n\n            const data = res.clone()\n            reportData.status = data.status\n            reportData.success = data.ok\n\n            lazyReportCache(reportData)\n\n            return res\n        })\n        .catch(err => {\n            reportData.endTime = Date.now()\n            reportData.duration = reportData.endTime - reportData.startTime\n            reportData.status = 0\n            reportData.success = false\n\n            lazyReportCache(reportData)\n\n            throw err\n        })\n    }\n}\n\nexport default function fetch() {\n    overwriteFetch()\n}","import { report } from '../utils/report'\nimport { deepCopy } from '../utils/utils'\n\nconst next = window.requestAnimationFrame \n    ? requestAnimationFrame : (callback) => { setTimeout(callback, 1000 / 60) }\n\nconst frames = []\n\nexport default function fps() {\n    let frame = 0\n    let lastSecond = Date.now()\n\n    function calculateFPS() {\n        frame++\n        const now = Date.now()\n        if (lastSecond + 1000 <= now) {\n            // 由于 now - lastSecond 的单位是毫秒，所以 frame 要 * 1000\n            const fps = Math.round((frame * 1000) / (now - lastSecond))\n            frames.push(fps)\n                \n            frame = 0\n            lastSecond = now\n        }\n    \n        // 避免上报太快，缓存一定数量再上报\n        if (frames.length >= 60) {\n            report(deepCopy({\n                frames,\n                type: 'performace',\n                subType: 'fps',\n            }))\n    \n            frames.length = 0\n        }\n\n        next(calculateFPS)\n    }\n\n    calculateFPS()\n}\n\nexport function isBlocking(fpsList, below = 20, last = 3) {\n    let count = 0\n    for (let i = 0; i < fpsList.length; i++) {\n        if (fpsList[i] && fpsList[i] < below) {\n            count++\n        } else {\n            count = 0\n        }\n\n        if (count >= last) {\n            return true\n        }\n    }\n\n    return false\n}","import { lazyReportCache } from '../utils/report'\nimport { getPageURL } from '../utils/utils'\n\nexport default function onVueRouter(Vue, router) {\n    let isFirst = true\n    let startTime\n    router.beforeEach((to, from, next) => {\n        // 首次进入页面已经有其他统计的渲染时间可用\n        if (isFirst) {\n            isFirst = false\n            return next()\n        }\n\n        // 给 router 新增一个字段，表示是否要计算渲染时间\n        // 只有路由跳转才需要计算\n        router.needCalculateRenderTime = true\n        startTime = performance.now()\n\n        next()\n    })\n\n    let timer\n    Vue.mixin({\n        mounted() {\n            if (!router.needCalculateRenderTime) return\n\n            this.$nextTick(() => {\n                // 仅在整个视图都被渲染之后才会运行的代码\n                const now = performance.now()\n                clearTimeout(timer)\n\n                timer = setTimeout(() => {\n                    router.needCalculateRenderTime = false\n                    lazyReportCache({\n                        type: 'performance',\n                        subType: 'vue-router-change-paint',\n                        duration: now - startTime,\n                        startTime: now,\n                        pageURL: getPageURL(),\n                    })\n                }, 1000)\n            })\n        },\n    })\n}","import observeEntries from './observeEntries'\nimport observePaint from './observePaint'\nimport observeLCP from './observeLCP'\nimport observeCLS from './observeCLS'\nimport observeFID from './observeFID'\nimport observerLoad from './observerLoad'\nimport observeFirstScreenPaint from './observeFirstScreenPaint'\nimport xhr from './xhr'\nimport fetch from './fetch'\nimport fps from './fps'\nimport onVueRouter from './onVueRouter'\nimport config from '../config'\n\nexport default function performance() {\n    observeEntries()\n    observePaint()\n    observeLCP()\n    observeCLS()\n    observeFID()\n    xhr()\n    fetch()\n    fps()\n    observerLoad()\n    observeFirstScreenPaint()\n\n    if (config.vue?.Vue && config.vue?.router) {\n        onVueRouter(config.vue.Vue, config.vue.router)\n    }\n}","import generateUniqueID from '../utils/generateUniqueID'\n\nlet uuid = ''\nexport function getUUID() {\n    if (uuid) return uuid\n\n    // 如果是手机 APP，可以调用原生方法或者设备唯一标识当成 uuid\n    uuid = localStorage.getItem('uuid')\n    if (uuid) return uuid\n\n    uuid = generateUniqueID()\n    localStorage.setItem('uuid', uuid)\n    return uuid\n}","import { lazyReportCache } from '../utils/report'\nimport { getUUID } from './utils'\nimport { getPageURL } from '../utils/utils'\n\nexport default function pv() {\n    lazyReportCache({\n        type: 'behavior',\n        subType: 'pv',\n        startTime: performance.now(),\n        pageURL: getPageURL(),\n        referrer: document.referrer,\n        uuid: getUUID(),\n    })\n}","import { report } from '../utils/report'\nimport { onBeforeunload, getPageURL } from '../utils/utils'\nimport { getUUID } from './utils'\n\nexport default function pageAccessDuration() {\n    onBeforeunload(() => {\n        report({\n            type: 'behavior',\n            subType: 'page-access-duration',\n            startTime: performance.now(),\n            pageURL: getPageURL(),\n            uuid: getUUID(),\n        }, true)\n    })\n}","import { lazyReportCache, report } from '../utils/report'\nimport { getUUID } from './utils'\nimport { onBeforeunload, executeAfterLoad, getPageURL } from '../utils/utils'\n\nlet timer\nlet startTime = 0\nlet hasReport = false\nlet pageHeight = 0\nlet scrollTop = 0\nlet viewportHeight = 0\n\nexport default function pageAccessHeight() {\n    window.addEventListener('scroll', onScroll)\n\n    onBeforeunload(() => {\n        const now = performance.now()\n        report({\n            startTime: now,\n            duration: now - startTime,\n            type: 'behavior',\n            subType: 'page-access-height',\n            pageURL: getPageURL(),\n            value: toPercent(scrollTop + viewportHeight / pageHeight),\n            uuid: getUUID(),\n        }, true)\n    })\n\n    // 页面加载完成后初始化记录当前访问高度、时间\n    executeAfterLoad(() => {\n        startTime = performance.now()\n        pageHeight = document.documentElement.scrollHeight || document.body.scrollHeight\n        scrollTop = document.documentElement.scrollTop || document.body.scrollTop\n        viewportHeight = window.innerHeight\n    })\n}\n\nfunction onScroll() {\n    clearTimeout(timer)\n    const now = performance.now()\n    \n    if (!hasReport) {\n        hasReport = true\n        lazyReportCache({\n            startTime: now,\n            duration: now - startTime,\n            type: 'behavior',\n            subType: 'page-access-height',\n            pageURL: getPageURL(),\n            value: toPercent(scrollTop + viewportHeight / pageHeight),\n            uuid: getUUID(),\n        })\n    }\n\n    timer = setTimeout(() => {\n        hasReport = false\n        startTime = now\n        pageHeight = document.documentElement.scrollHeight || document.body.scrollHeight\n        scrollTop = document.documentElement.scrollTop || document.body.scrollTop\n        viewportHeight = window.innerHeight        \n    }, 500)\n}\n\nfunction toPercent(val) {\n    if (val >= 1) return '100%'\n    return (val * 100).toFixed(2) + '%'\n}","import { lazyReportCache } from '../utils/report'\nimport { getPageURL } from '../utils/utils'\nimport { getUUID } from './utils'\n\nexport default function onClick() {\n    ['mousedown', 'touchstart'].forEach(eventType => {\n        let timer\n        window.addEventListener(eventType, event => {\n            clearTimeout(timer)\n            timer = setTimeout(() => {\n                const target = event.target\n                const { top, left } = target.getBoundingClientRect()\n                \n                lazyReportCache({\n                    top,\n                    left,\n                    eventType,\n                    pageHeight: document.documentElement.scrollHeight || document.body.scrollHeight,\n                    scrollTop: document.documentElement.scrollTop || document.body.scrollTop,\n                    type: 'behavior',\n                    subType: 'click',\n                    target: target.tagName,\n                    paths: event.path?.map(item => item.tagName).filter(Boolean),\n                    startTime: event.timeStamp,\n                    pageURL: getPageURL(),\n                    outerHTML: target.outerHTML,\n                    innerHTML: target.innerHTML,\n                    width: target.offsetWidth,\n                    height: target.offsetHeight,\n                    viewport: {\n                        width: window.innerWidth,\n                        height: window.innerHeight,\n                    },\n                    uuid: getUUID(),\n                })\n            }, 500)\n        })\n    })\n}","import { lazyReportCache } from '../utils/report'\nimport { getUUID } from './utils'\n\nexport default function onVueRouter(router) {\n    router.beforeEach((to, from, next) => {\n        // 首次加载页面不用统计\n        if (!from.name) {\n            return next()\n        }\n\n        const data = {\n            params: to.params,\n            query: to.query,\n        }\n\n        lazyReportCache({\n            data,\n            name: to.name || to.path,\n            type: 'behavior',\n            subType: ['vue-router-change', 'pv'],\n            startTime: performance.now(),\n            from: from.fullPath,\n            to: to.fullPath,\n            uuid: getUUID(),\n        })\n\n        next()\n    })\n}","import { getPageURL } from '../utils/utils'\nimport { lazyReportCache } from '../utils/report'\nimport { getUUID } from './utils'\n\nexport default function pageChange() {\n    let from = ''\n    window.addEventListener('popstate', () => {\n        const to = getPageURL()\n\n        lazyReportCache({\n            from,\n            to,\n            type: 'behavior',\n            subType: 'popstate',\n            startTime: performance.now(),\n            uuid: getUUID(),\n        })\n\n        from = to\n    }, true)\n\n    let oldURL = ''\n    window.addEventListener('hashchange', event => {\n        const newURL = event.newURL\n\n        lazyReportCache({\n            from: oldURL,\n            to: newURL,\n            type: 'behavior',\n            subType: 'hashchange',\n            startTime: performance.now(),\n            uuid: getUUID(),\n        })\n\n        oldURL = newURL\n    }, true)\n}","import pv from './pv'\nimport pageAccessDuration from './pageAccessDuration'\nimport pageAccessHeight from './pageAccessHeight'\nimport onClick from './onClick'\nimport config from '../config'\nimport onVueRouter from './onVueRouter'\nimport pageChange from './pageChange'\n\nexport default function behavior() {\n    pv()\n    pageAccessDuration()\n    pageAccessHeight()\n    onClick()\n    pageChange()\n\n    if (config.vue?.router) {\n        onVueRouter(config.vue.router)\n    }\n}","import error from './error/index'\nimport performance from './performance/index'\nimport behavior from './behavior/index'\nimport { setConfig } from './config'\nimport { onBeforeunload, onHidden } from './utils/utils'\nimport { report } from './utils/report'\nimport { getCache, clearCache } from './utils/cache'\n\nconst monitor = {\n    init(options = {}) {\n        setConfig(options)\n        error()\n        performance()\n        behavior();\n\n        // 当页面进入后台或关闭前时，将所有的 cache 数据进行上报\n        [onBeforeunload, onHidden].forEach(fn => {\n            fn(() => {\n                const data = getCache()\n                if (data.length) {\n                    report(data, true)\n                    clearCache()\n                }\n            })\n        })\n    },\n}\n\nexport default monitor"],"names":["originalProto","XMLHttpRequest","prototype","originalOpen","open","originalSend","send","deepCopy","target","result","Array","isArray","key","onBFCacheRestore","callback","window","addEventListener","event","persisted","onBeforeunload","onHidden","once","onHiddenOrPageHide","type","document","visibilityState","removeEventListener","executeAfterLoad","readyState","onLoad","getPageURL","location","href","cache","getCache","addCache","data","push","clearCache","length","generateUniqueID","Date","now","Math","floor","random","config","url","appID","userID","vue","Vue","router","setConfig","options","isSupportSendBeacon","navigator","sendBeacon","bind","reportWithXHR","sessionID","report","isImmediate","console","error","reportData","JSON","stringify","id","requestIdleCallback","timeout","setTimeout","timer","lazyReportCache","clearTimeout","xhr","call","oldConsoleError","args","apply","subType","startTime","performance","errData","pageURL","e","src","timeStamp","html","outerHTML","resourceType","tagName","paths","path","map","item","filter","Boolean","onerror","msg","line","column","stack","reason","errorHandler","err","vm","info","isSupportPerformanceObserver","PerformanceObserver","observeEntries","observeEvent","hasAlreadyCollected","entryType","entryHandler","list","getEntries","entry","observer","disconnect","nextHopProtocol","initiatorType","name","sourceType","duration","dns","domainLookupEnd","domainLookupStart","tcp","connectEnd","connectStart","redirect","redirectEnd","redirectStart","ttfb","responseStart","protocol","responseBodySize","encodedBodySize","responseHeaderSize","transferSize","resourceSize","decodedBodySize","isCache","observe","buffered","getEntriesByType","preventType","isSafari","test","userAgent","includes","observePaint","json","toJSON","requestAnimationFrame","forEach","bfc","lcpDone","isLCPDone","observeLCP","element","observeCLS","sessionValue","sessionEntries","cls","value","hadRecentInput","firstSessionEntry","lastSessionEntry","formatCLSEntry","entries","sources","observeFID","nodeName","cancelable","fidPolyfill","eachEventType","onInput","isEpochTime","eventTypes","passive","capture","observerLoad","onEvent","toLocaleLowerCase","isOnLoaded","checkDOMChange","getRenderTime","observeFirstScreenPaint","MutationObserver","next","ignoreDOMList","mutationList","children","mutation","addedNodes","isInScreen","node","nodeType","childList","subtree","fetchStart","responseEnd","viewportWidth","innerWidth","viewportHeight","innerHeight","dom","rectInfo","getBoundingClientRect","left","top","overwriteOpenAndSend","newOpen","method","newSend","onLoadend","endTime","status","toUpperCase","success","originalFetch","fetch","overwriteFetch","newFetch","then","res","clone","ok","catch","frames","fps","frame","lastSecond","calculateFPS","round","onVueRouter","isFirst","beforeEach","to","from","needCalculateRenderTime","mixin","mounted","$nextTick","uuid","getUUID","localStorage","getItem","setItem","pv","referrer","pageAccessDuration","hasReport","pageHeight","scrollTop","pageAccessHeight","onScroll","toPercent","documentElement","scrollHeight","body","val","toFixed","onClick","eventType","innerHTML","width","offsetWidth","height","offsetHeight","viewport","params","query","fullPath","pageChange","oldURL","newURL","behavior","monitor","init","fn"],"mappings":"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"}